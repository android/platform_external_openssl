{
  "comments": [
    {
      "key": {
        "uuid": "7ea7bc23_5f147b53",
        "filename": "ssl/ssl_sess.c",
        "patchSetId": 1
      },
      "lineNbr": 972,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2013-10-29T16:02:55Z",
      "side": 1,
      "message": "I suppose there is no STACK_OF(SSL_SESSION) ...",
      "revId": "d3b44c57bd36ab7129e38085de5a8306a5f2c521",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "de8ee8b0_c48a92df",
        "filename": "ssl/ssl_sess.c",
        "patchSetId": 1
      },
      "lineNbr": 972,
      "author": {
        "id": 1000411
      },
      "writtenOn": "2013-10-29T16:42:50Z",
      "side": 1,
      "message": "Exactly :-)",
      "parentUuid": "7ea7bc23_5f147b53",
      "revId": "d3b44c57bd36ab7129e38085de5a8306a5f2c521",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe62ccbe_2f6eb42d",
        "filename": "ssl/ssl_sess.c",
        "patchSetId": 1
      },
      "lineNbr": 998,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2013-10-29T16:02:55Z",
      "side": 1,
      "message": "ws",
      "revId": "d3b44c57bd36ab7129e38085de5a8306a5f2c521",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ec09cbf_0c8dbbc2",
        "filename": "ssl/ssl_sess.c",
        "patchSetId": 1
      },
      "lineNbr": 998,
      "author": {
        "id": 1000411
      },
      "writtenOn": "2013-10-29T16:42:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fe62ccbe_2f6eb42d",
      "revId": "d3b44c57bd36ab7129e38085de5a8306a5f2c521",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ed08087_317bb22c",
        "filename": "ssl/ssl_sess.c",
        "patchSetId": 1
      },
      "lineNbr": 1017,
      "author": {
        "id": 1031048
      },
      "writtenOn": "2013-10-29T16:43:34Z",
      "side": 1,
      "message": "I\u0027m not very familiar with openssl code, but can we get rid of this down_load fiddling now that entries are deleted outside the loop? It looks like that\u0027s only to make deleting entries inside a doall callback work.\n\nhttps://www.openssl.org/docs/crypto/lhash.html\n\nThough if this is the cause, that documentation seems off. Perhaps the problem is this comparison in lh_delete:\n\n\tif ((lh-\u003enum_nodes \u003e MIN_NODES) \u0026\u0026\n\t\t(lh-\u003edown_load \u003e\u003d (lh-\u003enum_items*LH_LOAD_MULT/lh-\u003enum_nodes)))\n\t\tcontract(lh);\n\nIf num_items is less than 1/256th (LH_LOAD_MULT \u003d 256) of num_nodes, then the division could round to 0 and still contract. And if, say, we have a fairly full session cache, stop using the browser for a while, and then call SSL_CTX_flush_sessions with most of those sessions expired, I could imagine the load getting off enough for that to happen. Or perhaps we just never end up deleting sessions through other codepaths, so the table has no chance to contract.\n\n(Short of contractions, it seems the doall_util_fn should be fine with the callback deleting things? It does read a-\u003enext before calling.)",
      "revId": "d3b44c57bd36ab7129e38085de5a8306a5f2c521",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1e5ec0fd_cd81bfbf",
        "filename": "ssl/ssl_sess.c",
        "patchSetId": 1
      },
      "lineNbr": 1023,
      "author": {
        "id": 1002975
      },
      "writtenOn": "2013-10-29T16:02:55Z",
      "side": 1,
      "message": "This should move up to the top of the function.",
      "revId": "d3b44c57bd36ab7129e38085de5a8306a5f2c521",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "de8ee8b0_a46e662e",
        "filename": "ssl/ssl_sess.c",
        "patchSetId": 1
      },
      "lineNbr": 1023,
      "author": {
        "id": 1000411
      },
      "writtenOn": "2013-10-29T16:42:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1e5ec0fd_cd81bfbf",
      "revId": "d3b44c57bd36ab7129e38085de5a8306a5f2c521",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}